{% extends "to_do/base.html" %}
{% load static %}

{% block content %}
  <h1>Seja bem-vindo ao To-do list</h1>

  <div class="mb-3">
    <input type="text" id="new-task" class="form-control" placeholder="Digite uma nova tarefa">
    <button id="add-task-btn" class="btn btn-primary mt-2">Adicionar Tarefa</button>
  </div>

  <ul id="task-list" class="list-group">
    <!-- Tarefas aparecerão aqui -->
  </ul>

  <script>
    const addTaskBtn = document.getElementById('add-task-btn');
    const taskInput = document.getElementById('new-task');
    const taskList = document.getElementById('task-list');

    addTaskBtn.addEventListener('click', () => {
      const taskText = taskInput.value.trim();
      if (taskText) {
        const li = document.createElement('li');
        li.className = 'list-group-item d-flex justify-content-between align-items-center';

        // Criar checkbox
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.className = 'form-check-input me-2';

        // Criar span para texto da tarefa
        const span = document.createElement('span');
        span.textContent = taskText;

        // Quando marcar/desmarcar, riscar texto
        checkbox.addEventListener('change', () => {
          if (checkbox.checked) {
            span.style.textDecoration = 'line-through';
            span.style.color = 'gray';
          } else {
            span.style.textDecoration = 'none';
            span.style.color = 'inherit';
          }
        });

        // Botão remover
        const removeBtn = document.createElement('button');
        removeBtn.className = 'btn btn-danger btn-sm';
        removeBtn.textContent = 'Remover';
        removeBtn.onclick = () => taskList.removeChild(li);

        // Montar item da lista: checkbox + texto + botão
        const taskContainer = document.createElement('div');
        taskContainer.className = 'd-flex align-items-center flex-grow-1';
        taskContainer.appendChild(checkbox);
        taskContainer.appendChild(span);

        li.appendChild(taskContainer);
        li.appendChild(removeBtn);

        taskList.appendChild(li);
        taskInput.value = '';
      } else {
        alert('Digite uma tarefa antes de adicionar!');
      }
    });
  </script>
{% endblock %}
